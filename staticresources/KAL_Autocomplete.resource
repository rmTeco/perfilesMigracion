window.autocomplete=function(e,t,n){var i;function a(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),i>=e.length&&(i=0),i<0&&(i=e.length-1),e[i].classList.add("autocomplete-active")}function l(t){for(var n=document.getElementsByClassName("autocomplete-items"),i=0;i<n.length;i++)t!=n[i]&&t!=e&&n[i].parentNode.removeChild(n[i])}e.addEventListener("input",function(a){var o,s,r,u=this.value;if(l(),!u)return!1;i=-1,(o=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),o.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(o);var c=[];n.set("v.Email",u);var d=u.indexOf("@"),m=u;for(-1!=d&&(m=u.slice(0,d)),u.slice(d),r=0;r<t.length;r++)c[r]=m+t[r];for(c==[]&&(c=t),r=0;r<c.length;r++)c[r].substr(0,u.length).toUpperCase()==u.toUpperCase()&&((s=document.createElement("DIV")).innerHTML="<strong>"+c[r].substr(0,u.length)+"</strong>",s.innerHTML+=c[r].substr(u.length),s.innerHTML+="<input type='hidden' value='"+c[r]+"'>",s.addEventListener("click",function(t){e.value=this.getElementsByTagName("input")[0].value,n.set("v.Email",e.value),l()}),o.appendChild(s))}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(i++,a(t)):38==e.keyCode?(i--,a(t)):13==e.keyCode&&(e.preventDefault(),i>-1&&t&&t[i].click())}),document.addEventListener("click",function(e){l(e.target)})};