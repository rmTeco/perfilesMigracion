@isTest
public class ComponentsTest {

    @testSetup
    static void prepareData() {
        List<vlocity_cmt__OmniScript__c> osList = new List<vlocity_cmt__OmniScript__c>();
        osList.add(new vlocity_cmt__OmniScript__c(Name = 'AccountCreate_Matrixx', vlocity_cmt__Version__c = 1.0, vlocity_cmt__IsProcedure__c = true, vlocity_cmt__IsActive__c = true));
        osList.add(new vlocity_cmt__OmniScript__c(Name = 'Account Order Upsell', vlocity_cmt__Version__c = 1.0, vlocity_cmt__IsProcedure__c = false, vlocity_cmt__IsActive__c = true));
        insert osList;

        Id elementOSId = [SELECT Id FROM vlocity_cmt__OmniScript__c WHERE Name = 'Account Order Upsell'].Id;
        Id elementIPId = [SELECT Id FROM vlocity_cmt__OmniScript__c WHERE Name = 'AccountCreate_Matrixx'].Id;

        List<vlocity_cmt__Element__c> elementOSList = new List<vlocity_cmt__Element__c>();

        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Choose Upsell Products',vlocity_cmt__Type__c = 'Selectable Items',vlocity_cmt__ParentElementId__c = null,vlocity_cmt__PropertySet__c = '{"show":null,"label":null,"remoteClass":"vlocity_cmt.CpqAppHandler","remoteMethod":"postCartsItems","remoteOptions":{"preTransformBundle":"","postTransformBundle":""},"remoteTimeout":30000,"preTransformBundle":"","postTransformBundle":"","HTMLTemplateId":"vdo-omniscript-product-recommendations","itemsKey":"","selectMode":"Multi","dataJSON":false,"modalHTMLTemplateId":"vlcModalContent.html","modalController":"ModalInstanceCtrl","modalSize":"","maxCompareSize":4,"modalConfigurationSetting":{"modalHTMLTemplateId":"vlcProductConfig.html","modalController":"ModalProductCtrl","modalSize":"lg"},"accessibleInFutureSteps":false,"sendJSONPath":"","sendJSONNode":"","responseJSONPath":"","responseJSONNode":"","disOnTplt":false}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Block1',vlocity_cmt__Type__c = 'Block',vlocity_cmt__ParentElementId__c = null,vlocity_cmt__PropertySet__c = '{"show":null,"label":"Block1","disOnTplt":false,"controlWidth":12,"collapse":false,"repeat":false,"repeatClone":false,"conditionType":"Hide if False","accessibleInFutureSteps":false,"HTMLTemplateId":"","hide":false}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Get Price List',vlocity_cmt__Type__c = 'DataRaptor Extract Action',vlocity_cmt__PropertySet__c = '{"show":null,"label":"Get Price List","controlWidth":12,"bundle":"VDOGetPriceList","dataRaptor Input Parameters":[{"inputParam":"Name","element":"PriceListName"}],"remoteTimeout":30000,"responseJSONPath":"","responseJSONNode":"","inProgressMessage":"In Progress","postMessage":"Done","failureNextLabel":"Continue","failureAbortLabel":"Abort","failureAbortMessage":"Are you sure?","validationRequired":"None","redirectPageName":"","redirectTemplateUrl":"vlcAcknowledge.html","redirectNextLabel":"Next","redirectNextWidth":3,"redirectPreviousLabel":"Previous","redirectPreviousWidth":3,"showPersistentComponent":[false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{}}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Create Order',vlocity_cmt__Type__c = 'Remote Action',vlocity_cmt__PropertySet__c = '{"show":null,"label":"Create Order","controlWidth":12,"remoteClass":"vlocity_cmt.CpqAppHandler","remoteMethod":"createCart","remoteOptions":{"preTransformBundle":"","postTransformBundle":""},"remoteTimeout":30000,"preTransformBundle":"","postTransformBundle":"","sendJSONPath":"","sendJSONNode":"","responseJSONPath":"","responseJSONNode":"","extraPayload":{"inputFields":[{"effectivedate":"%timeStamp%"},{"status":"Draft"},{"AccountId":"%ContextId%"},{"vlocity_cmt__PriceListId__c":"%pricelistid%"}],"objectType":"Order"},"inProgressMessage":"In Progress","postMessage":"Done","failureNextLabel":"Continue","failureAbortLabel":"Abort","failureAbortMessage":"Are you sure?","validationRequired":"None","redirectPageName":"","redirectTemplateUrl":"vlcAcknowledge.html","redirectNextLabel":"Next","redirectNextWidth":3,"redirectPreviousLabel":"Previous","redirectPreviousWidth":3,"showPersistentComponent":[false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{},"svgSprite":"","svgIcon":""}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Set Order Id',vlocity_cmt__Type__c = 'Set Values',vlocity_cmt__PropertySet__c = '{"show":null,"label":"Set Order Id","controlWidth":12,"validationRequired":"None","elementValueMap":{"OrderId":"%records|1:Id%"},"showPersistentComponent":[false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{}}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Create Cart',vlocity_cmt__Type__c = 'Remote Action',vlocity_cmt__PropertySet__c = '{"show":null,"label":"Create Cart","controlWidth":12,"remoteClass":"vlocity_cmt.CpqAppHandler","remoteMethod":"getCartsItems","remoteOptions":{"preTransformBundle":"","postTransformBundle":""},"remoteTimeout":30000,"preTransformBundle":"","postTransformBundle":"","sendJSONPath":"","sendJSONNode":"","responseJSONPath":"","responseJSONNode":"vlcCart","extraPayload":{"cartId":"%OrderId%"},"inProgressMessage":"In Progress","postMessage":"Done","failureNextLabel":"Continue","failureAbortLabel":"Abort","failureAbortMessage":"Are you sure?","validationRequired":"None","redirectPageName":"","redirectTemplateUrl":"vlcAcknowledge.html","redirectNextLabel":"Next","redirectNextWidth":3,"redirectPreviousLabel":"Previous","redirectPreviousWidth":3,"showPersistentComponent":[true],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{},"svgSprite":"","svgIcon":""}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Get Upsell Products',vlocity_cmt__Type__c = 'Remote Action',vlocity_cmt__PropertySet__c = '{"show":null,"label":"Get Upsell Products","controlWidth":12,"remoteClass":"vlocity_cmt.CpqAppHandler","remoteMethod":"getCartsProducts","remoteOptions":{"preTransformBundle":"","postTransformBundle":""},"remoteTimeout":30000,"preTransformBundle":"","postTransformBundle":"","sendJSONPath":"","sendJSONNode":"","responseJSONPath":"","responseJSONNode":"Choose Upsell Products","extraPayload":{"cartId":"%OrderId%","filters":"Product2.Name:IP-VPN Service_Business Essentials Bundle Extra Large_Security Essentials","hierarchy":0,"includeAttachment":true,"pagesize":8},"inProgressMessage":"In Progress","postMessage":"Done","failureNextLabel":"Continue","failureAbortLabel":"Abort","failureAbortMessage":"Are you sure?","validationRequired":"None","redirectPageName":"","redirectTemplateUrl":"vlcAcknowledge.html","redirectNextLabel":"Next","redirectNextWidth":3,"redirectPreviousLabel":"Previous","redirectPreviousWidth":3,"showPersistentComponent":[false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{},"svgSprite":"","svgIcon":""}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Recommended Products',vlocity_cmt__Type__c = 'Step',vlocity_cmt__PropertySet__c = '{"show":null,"label":"Recommended Products","validationRequired":true,"previousLabel":"Previous","previousWidth":3,"nextLabel":"Configure","nextWidth":3,"cancelLabel":"Cancel","cancelMessage":"Are you sure?","saveLabel":"Save for later","saveMessage":"Are you sure you want to save it for later?","completeLabel":"Complete","completeMessage":"Are you sure you want to complete the script?","instruction":"","showPersistentComponent":[true],"remoteClass":"","remoteMethod":"","remoteTimeout":30000,"remoteOptions":{},"knowledgeOptions":{"language":"English","publishStatus":"Online","keyword":"","dataCategoryCriteria":"","remoteTimeout":30000},"conditionType":"Hide if False","HTMLTemplateId":""}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'Configure Order',vlocity_cmt__Type__c = 'Done Action',vlocity_cmt__PropertySet__c = '{"show":null,"label":"Configure Order","controlWidth":12,"type":"URL","source":"/apex/vlocity_cmt__hybridcpq?id=%OrderId%","consoleTabLabel":"New","validationRequired":"Submit","redirectPageName":"mobileDone","redirectTemplateUrl":"vlcMobileConfirmation.html","HTMLTemplateId":"","wpm":false,"ssm":false,"message":{}}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));
        elementOSList.add(new vlocity_cmt__Element__c(Name = 'SetValues2',vlocity_cmt__Type__c = 'Set Values',vlocity_cmt__PropertySet__c = '{"show":null,"label":"SetValues2","disOnTplt":false,"controlWidth":12,"validationRequired":"None","elementValueMap":{},"showPersistentComponent":[false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{}}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementOSId));

        insert elementOSList;

        List<vlocity_cmt__Element__c> elementIPList = new List<vlocity_cmt__Element__c>();

        elementIPList.add(new vlocity_cmt__Element__c(Name = 'GetAccountType',vlocity_cmt__Type__c = 'DataRaptor Extract Action',vlocity_cmt__PropertySet__c = '{"show":null,"label":"GetAccountType","controlWidth":12,"bundle":"AccountGetOIDFromId","dataRaptor Input Parameters":[],"remoteTimeout":30000,"responseJSONPath":"","responseJSONNode":"","inProgressMessage":"In Progress","postMessage":"Done","failureNextLabel":"Continue","failureAbortLabel":"Abort","failureAbortMessage":"Are you sure?","validationRequired":"None","redirectPageName":"","redirectTemplateUrl":"vlcAcknowledge.html","redirectNextLabel":"Next","redirectNextWidth":3,"redirectPreviousLabel":"Previous","redirectPreviousWidth":3,"showPersistentComponent":[false,false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{},"failOnStepError":true}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementIPId));
        elementIPList.add(new vlocity_cmt__Element__c(Name = 'CreateBody',vlocity_cmt__Type__c = 'DataRaptor Extract Action',vlocity_cmt__PropertySet__c = '{"show":{"group":{"operator":"AND","rules":[{"condition":"=","field":null,"data":null}]}},"label":"GroupCreateBodyDR","controlWidth":12,"bundle":"AccountCreateBody_Matrixx","dataRaptor Input Parameters":[],"remoteTimeout":30000,"responseJSONPath":"","responseJSONNode":"","inProgressMessage":"In Progress","postMessage":"Done","failureNextLabel":"Continue","failureAbortLabel":"Abort","failureAbortMessage":"Are you sure?","validationRequired":"None","redirectPageName":"","redirectTemplateUrl":"vlcAcknowledge.html","redirectNextLabel":"Next","redirectNextWidth":3,"redirectPreviousLabel":"Previous","redirectPreviousWidth":3,"showPersistentComponent":[false,false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{},"executionConditionalFormula":"","failOnStepError":true}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementIPId));
        elementIPList.add(new vlocity_cmt__Element__c(Name = 'ErrorCallout',vlocity_cmt__Type__c = 'DataRaptor Post Action',vlocity_cmt__PropertySet__c = '{"label":"DataRaptor Post Action 3","bundle":"ErrorRecordCallout","executionConditionalFormula":"MakeCallout:_resultCode != 0","responseJSONPath":"","responseJSONNode":"","sendJSONPath":"","sendJSONNode":"","failureConditionalFormula":"MakeCallout:_resultCode != 0","failOnStepError":true}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementIPId));
        elementIPList.add(new vlocity_cmt__Element__c(Name = 'CalloutMajorError',vlocity_cmt__Type__c = 'Response Action',vlocity_cmt__PropertySet__c = '{"label":"Response Action 1","returnFullDataJSON":false,"responseFormat":"JSON","responseDefaultData":{"error":"Callout Fatal Error"},"executionConditionalFormula":"MakeCalloutStatus == false","responseJSONPath":"","responseJSONNode":"","sendJSONPath":"","sendJSONNode":"","failureConditionalFormula":"","failOnStepError":true}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementIPId));
        elementIPList.add(new vlocity_cmt__Element__c(Name = 'PrepareUpdateData',vlocity_cmt__Type__c = 'DataRaptor Transform Action',vlocity_cmt__PropertySet__c = '{"show":null,"label":"PrepareGrp","controlWidth":12,"bundle":"ObjectPrepareUpdate_Matrixx","remoteTimeout":30000,"postTransformBundle":"","sendJSONPath":"","sendJSONNode":"","inProgressMessage":"In Progress","postMessage":"Done","failureNextLabel":"Continue","failureAbortLabel":"Abort","failureAbortMessage":"Are you sure?","validationRequired":"Submit","redirectPageName":"","redirectTemplateUrl":"vlcAcknowledge.html","redirectNextLabel":"Next","redirectNextWidth":3,"redirectPreviousLabel":"Previous","redirectPreviousWidth":3,"showPersistentComponent":[false,false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{},"executionConditionalFormula":"","failOnStepError":true}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementIPId));
        elementIPList.add(new vlocity_cmt__Element__c(Name = 'UpdateObject',vlocity_cmt__Type__c = 'DataRaptor Post Action',vlocity_cmt__PropertySet__c = '{"show":null,"label":"UpdateAccountGrpDR","controlWidth":12,"bundle":"AccountCreateResponse_Matrixx","remoteTimeout":30000,"postTransformBundle":"","sendJSONPath":"PrepareUpdateData","sendJSONNode":"","inProgressMessage":"In Progress","postMessage":"Done","failureNextLabel":"Continue","failureAbortLabel":"Abort","failureAbortMessage":"Are you sure?","validationRequired":"Submit","redirectPageName":"","redirectTemplateUrl":"vlcAcknowledge.html","redirectNextLabel":"Next","redirectNextWidth":3,"redirectPreviousLabel":"Previous","redirectPreviousWidth":3,"showPersistentComponent":[false,false],"HTMLTemplateId":"","wpm":false,"ssm":false,"message":{},"executionConditionalFormula":"","failOnStepError":true}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementIPId));
        elementIPList.add(new vlocity_cmt__Element__c(Name = 'ErrorUpsert',vlocity_cmt__Type__c = 'DataRaptor Post Action',vlocity_cmt__PropertySet__c = '{"label":"DataRaptor Post Action 5","bundle":"ErrorRecordUpsert","executionConditionalFormula":"UpdateObjectStatus == false","responseJSONPath":"","responseJSONNode":"","sendJSONPath":"","sendJSONNode":"","failureConditionalFormula":"","failOnStepError":true}',vlocity_cmt__Active__c = true,vlocity_cmt__OmniScriptId__c = elementIPId));

        insert elementIPList;

        List<vlocity_cmt__DRMapItem__c> drList = new List<vlocity_cmt__DRMapItem__c>();
        drList.add(new vlocity_cmt__DRMapItem__c(Name = 'GetUserData', vlocity_cmt__DomainObjectAPIName__c = 'json', vlocity_cmt__DomainObjectCreationOrder__c = 0.0, vlocity_cmt__DomainObjectFieldAPIName__c = 'UserData', vlocity_cmt__DomainObjectFieldType__c = '', vlocity_cmt__FilterGroup__c = 0.0, vlocity_cmt__FilterOperator__c = '=', vlocity_cmt__FilterValue__c = 'Id', vlocity_cmt__GlobalKey__c = '245d770d-2a0f-0e92-7f53-d4cc19f557bd', vlocity_cmt__InterfaceFieldAPIName__c = 'Id', vlocity_cmt__InterfaceObjectLookupOrder__c = 1.0, vlocity_cmt__InterfaceObjectName__c = 'User', vlocity_cmt__IsDisabled__c = false, vlocity_cmt__IsRequiredForUpsert__c = false, vlocity_cmt__MapId__c = 'GetUserDataCustom2705', vlocity_cmt__TransformValuesMap__c = '', vlocity_cmt__UpsertKey__c = false));
        drList.add(new vlocity_cmt__DRMapItem__c(Name = 'GetUserData', vlocity_cmt__DomainObjectAPIName__c = 'json', vlocity_cmt__DomainObjectCreationOrder__c = 1.0, vlocity_cmt__DomainObjectFieldAPIName__c = 'ProfileId', vlocity_cmt__DomainObjectFieldType__c = 'String', vlocity_cmt__FilterOperator__c = '', vlocity_cmt__FilterValue__c = '', vlocity_cmt__GlobalKey__c = '358c7f36-25d5-7535-7732-dcfbde52cc0c', vlocity_cmt__InterfaceFieldAPIName__c = 'UserData:Profile.UserType', vlocity_cmt__InterfaceObjectName__c = '', vlocity_cmt__IsDisabled__c = false, vlocity_cmt__IsRequiredForUpsert__c = false, vlocity_cmt__MapId__c = 'GetUserDataCustom5511', vlocity_cmt__TransformValuesMap__c = '', vlocity_cmt__UpsertKey__c = false));
        insert drList;
    }

    @isTest
    static void OSListTest() {
        Components.osList();
    }

    @isTest
    static void OSElementTest() {
        Id osId = [SELECT Id FROM vlocity_cmt__OmniScript__c WHERE Name = 'Account Order Upsell'].Id;
        Components.OSElement(osId);
    }

    @isTest
    static void IPElementTest() {
        Id ipId = [SELECT Id FROM vlocity_cmt__OmniScript__c WHERE Name = 'AccountCreate_Matrixx'].Id;
        Components.OSElement(ipId);
    }
}